<!DOCTYPE html>
<html lang="en">
<head>
    <title>HabitFlow</title>
    <link rel="stylesheet" type="text/css" href="static/css/style.cs">
    <link rel="stylesheet" type="text/css" href="./style.css"></head>
<body>
    <div class="main">
        <div class="navbar">
            <div class="icon">
                <h2 class="logo">HabitFlow</h2>
            </div>

            <!-- code for the drop down menu -->
            <div class = "user">
                <nav>
                    <!-- icon, in which user can click to toggle drop down menu -->
                    <img src="images/Icon.jpg" class ="user-icon" onclick="toggleMenu()">
                    <div class="menu-wrap" id="subMenu">
                        <div class="menu-sub">
                            <div class="user-info">
                                <!-- display name and icon of the user -->
                                <img src="images/Icon.jpg">
                                <h3>{{ user.name }}</h3>
                            </div>
                            <p>&nbsp</p>
                            <hr>

                            <!-- profile header -->
                            <a href="#card-wrap" class="menu-link" id="open-profile">
                                <img src="images/profile.png">
                                <p>Profile</p>
                                <span>></span>
                            </a>

                            <!-- settings header -->
                            <a href="#" class="menu-link" id="open-settings">
                                <img src="images/setting.png">
                                <p>Settings</p>
                                <span>></span>
                            </a>

                            <!-- quotes header -->
                            <a href="#" class="menu-link" id="open-quotes">
                                <img src="images/quote.png">
                                <p>Quotes</p>
                                <span>></span>
                            </a>
                            <!-- log out header -->
                            <a href="index.html" class="menu-link">
                                <img src="images/logout.png">
                                <p>Logout</p>
                                <span>></span>
                            </a>

                        </div>
                    </div>
                </nav>
            </div>
            
            <!-- shows the profile section, in which user can edit name -->
            <div class="profile-wrap" id ="show-profile">
                <div class="sub-profile">
                    <div class="profile-header">
                        <img src="images/x.png" class ="profile-exit" id="profile-exit-btn">
                        <h3>Profile</h3>
                        <img src="images/Icon.jpg" class ="profile-icon">
                        <p>&nbsp</p>
                        <input type="text" id="name" name="name" placeholder="Your Name" required class="profile-name">
                        <p>&nbsp</p>
                        <button class="profile-save">Save</button>
                    </div>
                        
                </div>
            </div>
            
            <!-- shows the settings section, in which user can edit email and pass -->
            <div class="settings-wrap" id = "show-settings">
                <div class ="sub-settings">
                    <div class ="settings-header">
                        <img src="images/x.png" class ="settings-exit" id = "settings-exit-btn">
                        <h3>Settings</h3>
                        <p>&nbsp</p>
                        <input type="email" id="email" name="email" placeholder="Email" required class="change-settings">
                        <p>&nbsp</p>
                        <input type="password" id="password" name="password" placeholder="Password" required class="change-password">
                        <p>&nbsp</p>
                        <button class="settings-save">Save</button>
                    </div>
                </div>  
            </div> 

            <!-- shows the quotes section -->
            <div class="quotes-wrap" id = "show-quotes">
                <div class ="sub-quotes">
                    <div class ="quotes-header">
                        <img src="images/x.png" class ="quotes-exit" id = "quotes-exit-btn">
                        <h3>Quotes</h3>
                        <p>&nbsp</p>
                        <p>"Keep your face always toward the sunshine, and shadows will fall behind you." — Walt Whitman</p><br>
                        <p>"You are never too old to set another goal or to dream a new dream." — C.S. Lewis</p><br>
                        <p>"Believe you can and you're halfway there." — Theodore Roosevelt</p><br>
                        <p>"If you prioritize yourself, you are going to save yourself." — Gabrielle Union</p><br>
                        <p>"Optimism is the faith that leads to achievement. Nothing can be done without hope and confidence." — Helen Keller</p><br>
                        <p>"Doubt kills more dreams than failure ever will." — Suzy Kassem</p><br>
                        <p>"For every reason it's not possible, there are hundreds of people who have faced the same circumstances and succeeded." — Jack Canfield</p><br>
                        <p>"Dreams are the touchstones of our characters." ― Henry David Thoreau</p><br>
                        <p>"The secret of getting ahead is getting started." — Mark Twain</p><br>
                        <p>"Don't judge each day by the harvest you reap but by the seeds that you plant." — Robert Louis Stevenson</p><br>
                    </div>
                </div>  
            </div>
        </div>

        <div class="content">
            <hr class="divider">
            <p class="par"><br></p>

            <!--<div class="color_container">
                <ul class="color">
                    <li class="green">S</li>
                    <li class="blue">M</li>
                    <li class="red">T</li>     
                    <li class="purple">W</li>
                    <li class="cyan">T</li>
                    <li class="yellow">F</li>
                    <li class="green">S</li>
                </ul>
            </div>-->

<!--Main Button for each habit that has been created.-->
<div class="button_container">
    <button class="btn" id="habitButton"><span>Habit</span></button>
    <span class="counter">0</span>
</div>

<!-- Plus button to click for new habit-->
<div class="plus_container">
    <button class="plus" id="addButton"> + </button>
<!--Form to add a new habit-->
    <section id="overlay">
        <form action="#" method="POST">
            <section class="habit">
                <label for="habit">Habit:</label>
                <!--user inputs new habit they want to create-->
                <input type="text" name="habit" id="habit" placeholder="Enter habit">
            </section>
            <!--user selects day(s) they want habit to the habit-->
            <section class="day-selection">
                <label>Days:</label>
                <div class="days-container">
                    <button type="button" class="day-btn" data-day="Sunday">S</button>
                    <button type="button" class="day-btn" data-day="Monday">M</button>
                    <button type="button" class="day-btn" data-day="Tuesday">T</button>
                    <button type="button" class="day-btn" data-day="Wednesday">W</button>
                    <button type="button" class="day-btn" data-day="Thursday">T</button>
                    <button type="button" class="day-btn" data-day="Friday">F</button>
                    <button type="button" class="day-btn" data-day="Saturday">S</button>
                </div>
            </section>
            <!--user selects time they want to do the habit-->
            <section class="time-selection">
                <label for="time">Time:</label>
                <input type="text" id="time" name="time" placeholder="__:__" 
                       maxlength="5" 
                       inputmode="numeric" 
                       required>
                <select name="ampm" id="ampm">
                    <option value="AM">AM</option>
                    <option value="PM">PM</option>
                </select>
            </section>
            <!--user selects when they want notification-->
            <section class="alert">
                <label for="alert">Alert:</label>
                <select name="alert" id="alert">
                    <option value="atTime">At time of event</option>
                    <option value="15minbf">15 mins before</option>
                    <option value="30minbf">30 mins before</option>
                    <option value="1hrbf">1 hour of event</option>
                    <option value="2hrbf">2 hours before</option>
                    <option value="1daybf">1 day before</option>
                </select>
            </section>
            <!--user clicks to submit a new habit that would appear as a new habit bar above plus sign-->
            <section class="submission">
                <input type="submit" value="Submit">
            </section>
        </form>
    </section>
</div>
</div>
</div>

    <script> /*javascript working for forms attempting to push*/    // Show or hide the form overlay (Plus Button functionality)
        const addButton = document.getElementById('addButton');
        const overlay = document.getElementById('overlay');
    
        addButton.addEventListener('click', function() {
            console.log('Add button clicked');
            if (overlay.style.display === 'none' || overlay.style.display === '') {
                overlay.style.display = 'block';
            } else {
                overlay.style.display = 'none';
            }
        });
        const inputField = document.getElementById('habit');
        const timeField = document.getElementById('time');
        const ampmField = document.getElementById('ampm');
        const dayButtons = document.querySelectorAll('.day-btn');
        const habitDisplayButton = document.getElementById('habitButton');
        
        let clickCounter = 0;
    
        let counterContainer = document.querySelector('.counter');
    
    if (!counterContainer) {
        counterContainer = document.createElement('span');
        counterContainer.classList.add('counter'); 
        counterContainer.style.marginLeft = '5px';
        habitDisplayButton.parentNode.appendChild(counterContainer);
    }
    
        function getSelectedDays() {
            const selectedDays = [];
            dayButtons.forEach(button => {
                if (button.classList.contains('selected')) {
                    selectedDays.push(button.dataset.day);
                }
            });
            return selectedDays.join(', ') || 'No days selected';
        }
    
        function updateButtonText() {
            const habitName = inputField.value || 'Habit';
            const time = timeField.value || 'No time set';
            const ampm = ampmField.value || ''; 
            const days = getSelectedDays();
            habitDisplayButton.textContent = `${habitName} - ${time} ${ampm} - ${days}`;
        }
    
        habitDisplayButton.addEventListener('click', function() {
        if (clickCounter === 0) {
            clickCounter++;
            counterContainer.textContent = `Clicks: ${clickCounter}`;
        }
        updateButtonText();
    });
    
    
        inputField.addEventListener('input', updateButtonText);
        timeField.addEventListener('input', updateButtonText);
        ampmField.addEventListener('change', updateButtonText);
    
        dayButtons.forEach(button => {
            button.addEventListener('click', function() {
                button.classList.toggle('selected');
                updateButtonText();
            });
        });
    
        const colorContainer = document.querySelector('.color_container');
        const toggleHabitButton = document.querySelector('.btn');
        toggleHabitButton.addEventListener('click', function() {
            colorContainer.style.opacity = '1';
            colorContainer.style.visibility = 'visible';
    
            setTimeout(function() {
                colorContainer.style.opacity = '0';
                colorContainer.style.visibility = 'hidden';
            }, 5000);
        });
    
        document.getElementById('time').addEventListener('input', function(e) {
            const value = e.target.value;
            const timePattern = /^([01]\d|2[0-3]):[0-5]\d$/;
    
            if (!timePattern.test(value)) {
                e.target.setCustomValidity("Please enter a valid format HH:MM");
            } else {
                e.target.setCustomValidity("");
            }
        });


        dayButtons.forEach(button => {
            button.addEventListener('click', function() {
                button.classList.toggle('selected');
            });
        });

        //opens and closes drop-down menu
        let subMenu = document.getElementById("subMenu");
        function toggleMenu(){
            subMenu.classList.toggle("open-menu");
        }

        //opens profile pop-up
        document.getElementById("show-profile").style.display = "none";
        function openProfile() {
            document.getElementById("show-profile").style.display = "block";
             closeSettings();
             closeQuotes();
             toggleMenu();
        }
        document.getElementById('open-profile').addEventListener('click', openProfile);
        //closes profile pop-up
        function closeProfile() {
             document.getElementById("show-profile").style.display = "none";
        }
        document.getElementById("profile-exit-btn").addEventListener('click', closeProfile);
            

        //opens settings pop-up
        document.getElementById("show-settings").style.display = "none";
        function openSettings() {
            document.getElementById("show-settings").style.display = "block";
                closeProfile();
                closeQuotes();
                 toggleMenu();
          }
        document.getElementById('open-settings').addEventListener('click', openSettings);
        //closes settings pop-up
        function closeSettings() {
            document.getElementById("show-settings").style.display = "none";
        }
        document.getElementById("settings-exit-btn").addEventListener('click', closeSettings);


        //opens quotes pop-up
        document.getElementById("show-quotes").style.display = "none";
        function openQuotes() {
            document.getElementById("show-quotes").style.display = "block";
            closeProfile();
            closeSettings();
            toggleMenu();
            }
        document.getElementById('open-quotes').addEventListener('click', openQuotes);
        //closes quotes pop-up
        function closeQuotes() {
            document.getElementById("show-quotes").style.display = "none";
            }
        document.getElementById("quotes-exit-btn").addEventListener('click', closeQuotes);
    </script>
</body>
</html>